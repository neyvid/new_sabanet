<footer class="main-footer text-left">
    <strong>Copyleft &copy; 2014-2017 <a href="https://adminlte.io">Almsaeed Studio</a> & <a
            href="http://hosseinizadeh.ir/adminlte">Alireza Hosseinizadeh</a></strong>
</footer>

<!-- Control Sidebar -->
<aside class="control-sidebar control-sidebar-dark">
    <!-- Create the tabs -->
    <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
        <li><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>
        <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>
    </ul>
    <!-- Tab panes -->
    <div class="tab-content">
        <!-- Home tab content -->
        <div class="tab-pane" id="control-sidebar-home-tab">
            <h3 class="control-sidebar-heading">فعالیت ها</h3>
            <ul class="control-sidebar-menu">
                <li>
                    <a href="javascript:void(0)">
                        <i class="menu-icon fa fa-birthday-cake bg-red"></i>

                        <div class="menu-info">
                            <h4 class="control-sidebar-subheading">تولد غلوم</h4>

                            <p>۲۴ مرداد</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="javascript:void(0)">
                        <i class="menu-icon fa fa-user bg-yellow"></i>

                        <div class="menu-info">
                            <h4 class="control-sidebar-subheading">آپدیت پروفایل سجاد</h4>

                            <p>تلفن جدید (800)555-1234</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="javascript:void(0)">
                        <i class="menu-icon fa fa-envelope-o bg-light-blue"></i>

                        <div class="menu-info">
                            <h4 class="control-sidebar-subheading">نورا به خبرنامه پیوست</h4>

                            <p>nora@example.com</p>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="javascript:void(0)">
                        <i class="menu-icon fa fa-file-code-o bg-green"></i>

                        <div class="menu-info">
                            <h4 class="control-sidebar-subheading">کرون جابز اجرا شد</h4>

                            <p>۵ ثانیه پیش</p>
                        </div>
                    </a>
                </li>
            </ul>
            <!-- /.control-sidebar-menu -->

            <h3 class="control-sidebar-heading">پیشرفت کارها</h3>
            <ul class="control-sidebar-menu">
                <li>
                    <a href="javascript:void(0)">
                        <h4 class="control-sidebar-subheading">
                            ساخت پوستر های تبلیغاتی
                            <span class="label label-danger pull-left">70%</span>
                        </h4>

                        <div class="progress progress-xxs">
                            <div class="progress-bar progress-bar-danger" style="width: 70%"></div>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="javascript:void(0)">
                        <h4 class="control-sidebar-subheading">
                            آپدیت رزومه
                            <span class="label label-success pull-left">95%</span>
                        </h4>

                        <div class="progress progress-xxs">
                            <div class="progress-bar progress-bar-success" style="width: 95%"></div>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="javascript:void(0)">
                        <h4 class="control-sidebar-subheading">
                            آپدیت لاراول
                            <span class="label label-warning pull-left">50%</span>
                        </h4>

                        <div class="progress progress-xxs">
                            <div class="progress-bar progress-bar-warning" style="width: 50%"></div>
                        </div>
                    </a>
                </li>
                <li>
                    <a href="javascript:void(0)">
                        <h4 class="control-sidebar-subheading">
                            بخش پشتیبانی سایت
                            <span class="label label-primary pull-left">68%</span>
                        </h4>

                        <div class="progress progress-xxs">
                            <div class="progress-bar progress-bar-primary" style="width: 68%"></div>
                        </div>
                    </a>
                </li>
            </ul>
            <!-- /.control-sidebar-menu -->

        </div>
        <!-- /.tab-pane -->
        <!-- Stats tab content -->
        <div class="tab-pane" id="control-sidebar-stats-tab">وضعیت</div>
        <!-- /.tab-pane -->
        <!-- Settings tab content -->
        <div class="tab-pane" id="control-sidebar-settings-tab">
            <form method="post">
                <h3 class="control-sidebar-heading">تنظیمات عمومی</h3>

                <div class="form-group">
                    <label class="control-sidebar-subheading">
                        گزارش کنترلر پنل
                        <input type="checkbox" class="pull-left" checked>
                    </label>

                    <p>
                        ثبت تمامی فعالیت های مدیران
                    </p>
                </div>
                <!-- /.form-group -->

                <div class="form-group">
                    <label class="control-sidebar-subheading">
                        ایمیل مارکتینگ
                        <input type="checkbox" class="pull-left" checked>
                    </label>

                    <p>
                        اجازه به کاربران برای ارسال ایمیل
                    </p>
                </div>
                <!-- /.form-group -->

                <div class="form-group">
                    <label class="control-sidebar-subheading">
                        در دست تعمیرات
                        <input type="checkbox" class="pull-left" checked>
                    </label>

                    <p>
                        قرار دادن سایت در حالت در دست تعمیرات
                    </p>
                </div>
                <!-- /.form-group -->

                <h3 class="control-sidebar-heading">تنظیمات گفتگوها</h3>

                <div class="form-group">
                    <label class="control-sidebar-subheading">
                        آنلاین بودن من را نشان نده
                        <input type="checkbox" class="pull-left" checked>
                    </label>
                </div>
                <!-- /.form-group -->

                <div class="form-group">
                    <label class="control-sidebar-subheading">
                        اعلان ها
                        <input type="checkbox" class="pull-left">
                    </label>
                </div>
                <!-- /.form-group -->

                <div class="form-group">
                    <label class="control-sidebar-subheading">
                        حذف تاریخته گفتگوهای من
                        <a href="javascript:void(0)" class="text-red pull-left"><i class="fa fa-trash-o"></i></a>
                    </label>
                </div>
                <!-- /.form-group -->
            </form>
        </div>
        <!-- /.tab-pane -->
    </div>
</aside>
<!-- /.control-sidebar -->
<!-- Add the sidebar's background. This div must be placed
     immediately after the control sidebar -->
<div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->
<script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
<script type="text/javascript"
        src="https://cdn.datatables.net/v/dt/jszip-2.5.0/b-2.0.1/b-colvis-2.0.1/b-html5-2.0.1/b-print-2.0.1/datatables.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/sl-1.3.3/datatables.min.js"></script>
<script src="{{asset('/js/admin_assets/app.js')}}"></script>
<link rel="stylesheet" href="{{asset('/css/admin_assets/custom_datatables.css')}}">
<!-- page script -->

<script>

    $(document).ready(function () {

        $('input').iCheck({
            checkboxClass: 'icheckbox_flat-blue',

        });


        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })


        $('td').on('click', '.change_status', function (e) {
            let tag = $(this);
            e.preventDefault();
            swal({
                title: "ازتغییروضعیت کاربراطمینان دارید؟",
                text: "تغییر وضعیت کاربر باعث تغییر در عمکلرد و سطح دسترسی های کاربر می شود.",
                icon: "warning",
                buttons: {
                    cancel: "انصراف",
                    defeat: 'بله',
                },
                dangerMode: true,
            })
                .then((willDelete) => {
                    if (willDelete) {
                        $.ajaxSetup({
                            headers: {
                                'X-CSRF-TOKEN': $('meta[name="_token"]').attr('content')
                            }
                        });
                        $.ajax({
                            url: "{{ url('/admin/user/change_status') }}",
                            method: 'post',
                            data: {
                                user_id: tag.data('user')
                            },
                            success: function (result) {
                                let statusClass = result['status'] === 'active' ? 'success' : 'danger';
                                let statusText = result['status'] === 'active' ? 'تایید شده' : 'تایید نشده';
                                tag.replaceWith("<span data-user=" + result['id'] + " style='cursor:pointer;' class='label change_status label-" + statusClass + "'>" + statusText + "</span>");
                            }
                        });
                    }
                });

        });

        let table = $('#example1').DataTable({

            columnDefs: [
                {"orderable": false, "targets": 0}
            ],
            "order": [[ 1, "asc" ]],
            "language": {
                "decimal": "",
                "emptyTable": "اطلاعاتی برای نمایش موجود نیست",
                "info": "نمایش _START_ تا _END_ از _TOTAL_ مورد",
                "infoEmpty": "نمایش 0 تا 0 از 0 ورودی",
                "infoFiltered": "(فیلتر شده از _MAX_ کل موارد)",
                "infoPostFix": "",
                "thousands": ",",
                "lengthMenu": "نمایش _MENU_ مورد",
                "loadingRecords": "Loading...",
                "processing": "درحال پردازش...",
                "search": "جستجو:",
                "zeroRecords": "هیچ موردی یافت نشد",
                "paginate": {
                    "first": "ابتدا",
                    "last": "آخر",
                    "next": "بعدی",
                    "previous": "قبلی"
                },
                "aria": {
                    "sortAscending": ": فعال شدن نمایش بصورت صعودی",
                    "sortDescending": ": فعال شدن نمایش بصورت نزولی"
                }

            },
            select: {
                style: 'multi',
            },
            buttons: [

                {extend: 'pdf', className: 'btn btn-info', text: 'خروجی PDF'},
                {extend: 'copy', className: 'btn btn-info', text: 'کپی'},
                {extend: 'excel', className: 'btn btn-info', text: 'خروجی اکسل'},
                {extend: 'print', className: 'btn btn-info', text: 'چاپ'},
                {
                    extend: 'selectAll',
                    className: 'btn btn-danger',
                    text: 'انتخاب همه',
                    action: function () {
                        table.rows({
                            page: 'current'
                        }).select();
                        $(".check").prop('checked', true);
                        $(".icheckbox_flat-blue").addClass('checked');

                    }
                },
                {
                    extend: 'selectNone',
                    className: 'btn btn-dabger',
                    text: 'حذف انتخاب',
                    action: function () {
                        table.rows({
                            page: 'current'
                        }).deselect();
                        $(".check").prop('checked', false);
                        $(".icheckbox_flat-blue").removeClass('checked');
                    }
                },
                {
                    text: 'حذف همه',
                    className: 'btn btn-danger delete_all_btn',
                    titleAttr: 'select all',
                    action: function () {
                        swal({
                            title: "آیا از حذف کاربر و یا کاربران انتخاب شده مطمئن هستید؟",
                            text: "با حذف کاربر/کاربران امکان بازیابی کاربر و یا کاربران حذف شده مقدورنمی باشد.",
                            icon: "warning",
                            buttons: {
                                cancel: "انصراف",
                                defeat: 'بله',
                            },
                            dangerMode: true,
                        }).then((willDelete) => {
                            if (willDelete && $('#example1 tbody tr td').find('input').is(':checked')) {
                                $('.frm').submit();
                            } else {
                                swal({
                                    text: 'کاربر و یا کاربرانی برای حذف انتخاب نشده است!',
                                    icon: "warning",
                                    buttons: {

                                        defeat: 'متوجه شدم',
                                    },
                                    dangerMode: true,
                                })
                            }
                        });


                    }

                },
            ],
            dom: 'flBtpi',


        })

        $('#example1 tbody tr td').find('input').iCheck('uncheck');

        $('#example1 tbody').on('click', 'tr', function () {

            if ($(this).find(".icheckbox_flat-blue").hasClass('checked')) {
                $(this).find('input').iCheck('uncheck')
                // $(this).find(".icheckbox_flat-blue").removeClass('checked');
                // $(this).find("input.checkbox").prop('checked',false);
            } else {
                $(this).find('input').iCheck('check')
                // $(this).find(".icheckbox_flat-blue").addClass('checked');
                // $(this).find("input.checkbox").prop('checked',true);
            }
        });

    });

</script>
</body>
</html>
